(function(g){var window=this;'use strict';var Ut=function(k){k.publish("autonavvisibility")},yzp=function(k,U){g.LB(k,"onAutonavCoundownStarted",U)},nx=function(k){return k.isBackground()&&k.eA()},cz2=function(k,U){U=U.getWatchNextResponse()?.playerOverlays?.playerOverlayRenderer?.autoplay?.playerOverlayAutoplayRenderer?.nextButton?.buttonRenderer;
k.Y=U?.navigationEndpoint;U=U?.trackingParams;k.playButton&&U&&k.O.setTrackingParams(k.playButton.element,U)},rL=function(k){const U=Z6(k);
var n=Math,Z=n.min;var C=k.L?Date.now()-k.L:0;n=Z.call(n,C,U);Cx(k,Math.ceil((U-n)/1E3));U-n<=500&&k.S()?k.select(!0):k.S()&&k.D.start()},Lx=function(k){var U=k.O.YG(!0,k.O.isFullscreen());
g.N(k.container.element,"ytp-autonav-endscreen-small-mode",k.y0(U));g.N(k.container.element,"ytp-autonav-endscreen-is-premium",!!k.suggestion&&!!k.suggestion.GH);g.N(k.O.getRootNode(),"ytp-autonav-endscreen-cancelled-state",!k.O.m7());g.N(k.O.getRootNode(),"countdown-running",k.S());g.N(k.container.element,"ytp-player-content",k.O.m7());g.Pl(k.overlay.element,{width:`${U.width}px`});if(!k.S()){k.O.m7()?Cx(k,Math.round(Z6(k)/1E3)):Cx(k);U=!!k.suggestion&&!!k.suggestion.Pw;const n=k.O.m7()||!U;g.N(k.container.element,
"ytp-autonav-endscreen-upnext-alternative-header-only",!n&&U);g.N(k.container.element,"ytp-autonav-endscreen-upnext-no-alternative-header",n&&!U);k.V.Uj(k.O.m7());g.N(k.element,"ytp-enable-w2w-color-transitions",!!k.O.getVideoData()?.watchToWatchTransitionRenderer)}},Cx=function(k,U=-1){k=k.J.jE("ytp-autonav-endscreen-upnext-header");
g.g8(k);if(U>=0){U=String(U);const n="Up next in $SECONDS".match(RegExp("\\$SECONDS","gi"))[0],Z="Up next in $SECONDS".indexOf(n);if(Z>=0){k.appendChild(g.w8("Up next in $SECONDS".slice(0,Z)));const C=g.Ox("span");g.rp(C,"ytp-autonav-endscreen-upnext-header-countdown-number");g.d8(C,U);k.appendChild(C);k.appendChild(g.w8("Up next in $SECONDS".slice(Z+n.length)));return}}g.d8(k,"Up next")},Z6=function(k){return k.O.isFullscreen()?(k=k.O.getVideoData()?.G4,k===-1||k===void 0?8E3:k):k.O.OA()>=0?k.O.OA():
g.ve(k.O.U().experiments,"autoplay_time")||1E4},Fq=function(k,U){U=lrB(k,U);
var n=Math,Z=n.min;var C=(0,g.D)()-k.L;n=Z.call(n,C,U);U=U===0?1:Math.min(n/U,1);k.Wy.setAttribute("stroke-dashoffset",`${-211*(U+1)}`);U>=1&&k.S()&&k.api.getPresentingPlayerType()!==3?k.select(!0):k.S()&&k.J.start()},lrB=function(k,U){return U?U:k.api.isFullscreen()?(k=k.api.getVideoData()?.G4,k===-1||k===void 0?8E3:k):k.api.OA()>=0?k.api.OA():g.ve(k.api.U().experiments,"autoplay_time")||1E4},vD=function(k){const U=k.m7();
U!==k.L&&(k.L=U,Ut(k.player),k.L?(k.B!==k.S&&k.B.hide(),k.table.hide()):(k.B!==k.S&&k.B.show(),k.table.show()))},Ot=function(k){return g.pB(k.player)&&k.J()&&!k.W},wL=function(k){const U=k.m7();
U!==k.D&&(k.D=U,Ut(k.player))},ux=function(k){return g.pB(k.player)&&k.J()&&!k.V},gL=function(k){const U=k.m7();
U!==k.SE&&(k.SE=U,Ut(k.player))},mTV=function(k){k=k.U();
return k.lZ&&!k.ef&&!k.disableOrganicUi},xTb=function(k){const U=k.player.getVideoData();
if(!U||k.S===U.F2&&k.B===U.h8)return!1;k.S=U.F2;k.B=U.h8;return!0},kob=function(k){k.player.Wn("endscreen");
var U=k.player.getVideoData();U=new g.sc(Math.max((U.lengthSeconds-10)*1E3,0),0x8000000000000,{id:"preload",namespace:"endscreen"});const n=new g.sc(0x8000000000000,0x8000000000000,{id:"load",priority:8,namespace:"endscreen"});k.player.oA([U,n])};
g.wX.prototype.OA=g.nz(9,function(){return this.app.OA()});
g.xG.prototype.OA=g.nz(8,function(){return this.getVideoData().jy});
g.OH.prototype.ZX=g.nz(7,function(k){this.Iw().ZX(k)});
g.ac.prototype.ZX=g.nz(6,function(k){this.Fv!==k&&(this.Fv=k,this.hC())});
var iHm=class extends g.l{constructor(k){const U=k.U(),n=U.J;super({Z:"a",A:"ytp-autonav-suggestion-card",N:{href:"{{url}}",target:n?U.D:"","aria-label":"{{aria_label}}","data-is-live":"{{is_live}}","data-is-list":"{{is_list}}","data-is-mix":"{{is_mix}}","data-is-upcoming":"{{is_upcoming}}"},G:[{Z:"div",O4:["ytp-autonav-endscreen-upnext-thumbnail","ytp-autonav-thumbnail-small"],N:{style:"{{background}}"},G:[{Z:"div",N:{"aria-label":"{{timestamp}}"},O4:["ytp-autonav-timestamp"],zJ:"{{duration}}"},
{Z:"div",O4:["ytp-autonav-live-stamp"],zJ:"Live"},{Z:"div",O4:["ytp-autonav-upcoming-stamp"],zJ:"Upcoming"},{Z:"div",A:"ytp-autonav-list-overlay",G:[{Z:"div",A:"ytp-autonav-mix-text",zJ:"Mix"},{Z:"div",A:"ytp-autonav-mix-icon"}]}]},{Z:"div",O4:["ytp-autonav-endscreen-upnext-title","ytp-autonav-title-card"],zJ:"{{title}}"},{Z:"div",O4:["ytp-autonav-endscreen-upnext-author","ytp-autonav-author-card"],zJ:"{{author}}"},{Z:"div",O4:["ytp-autonav-endscreen-upnext-author","ytp-autonav-view-and-date-card"],
zJ:"{{views_and_publish_time}}"}]});this.O=k;this.suggestion=null;this.S=n;this.listen("click",this.onClick);this.listen("keypress",this.onKeyPress)}select(){this.O.OQ(this.suggestion.videoId,this.suggestion.sessionData,this.suggestion.playlistId,void 0,void 0,this.suggestion.Tv||void 0)&&this.O.logClick(this.element)}onClick(k){g.WG(k,this.O,this.S,this.suggestion.sessionData||void 0)&&this.select()}onKeyPress(k){switch(k.keyCode){case 13:case 32:k.defaultPrevented||(this.select(),k.preventDefault())}}};var Xq=class extends g.l{constructor(k,U=!1){super({Z:"div",A:"ytp-autonav-endscreen-countdown-overlay"});this.IQ=U;this.cancelCommand=this.Y=void 0;this.L=0;this.container=new g.l({Z:"div",A:"ytp-autonav-endscreen-countdown-container"});g.K(this,this.container);this.container.E4(this.element);U=k.U();const n=U.J;this.O=k;this.suggestion=null;this.onVideoDataChange("newdata",this.O.getVideoData());this.K(k,"videodatachange",this.onVideoDataChange);this.J=new g.l({Z:"div",A:"ytp-autonav-endscreen-upnext-container",
N:{"aria-label":"{{aria_label}}","data-is-live":"{{is_live}}","data-is-list":"{{is_list}}","data-is-mix":"{{is_mix}}","data-is-upcoming":"{{is_upcoming}}"},G:[{Z:"div",A:"ytp-autonav-endscreen-upnext-header"},{Z:"div",A:"ytp-autonav-endscreen-upnext-alternative-header",zJ:"{{autoplayAlternativeHeader}}"},{Z:"a",A:"ytp-autonav-endscreen-link-container",N:{href:"{{url}}",target:n?U.D:""},G:[{Z:"div",A:"ytp-autonav-endscreen-upnext-thumbnail",N:{style:"{{background}}"},G:[{Z:"div",N:{"aria-label":"{{timestamp}}"},
O4:["ytp-autonav-timestamp"],zJ:"{{duration}}"},{Z:"div",O4:["ytp-autonav-live-stamp"],zJ:"Live"},{Z:"div",O4:["ytp-autonav-upcoming-stamp"],zJ:"Upcoming"}]},{Z:"div",A:"ytp-autonav-endscreen-video-info",G:[{Z:"div",A:"ytp-autonav-endscreen-premium-badge"},{Z:"div",A:"ytp-autonav-endscreen-upnext-title",zJ:"{{title}}"},{Z:"div",A:"ytp-autonav-endscreen-upnext-author",zJ:"{{author}}"},{Z:"div",A:"ytp-autonav-view-and-date",zJ:"{{views_and_publish_time}}"},{Z:"div",A:"ytp-autonav-author-and-view",zJ:"{{author_and_views}}"}]}]}]});
g.K(this,this.J);this.J.E4(this.container.element);n||this.K(this.J.jE("ytp-autonav-endscreen-link-container"),"click",this.x$);this.O.createClientVe(this.container.element,this,115127);this.O.createClientVe(this.J.jE("ytp-autonav-endscreen-link-container"),this,115128);this.overlay=new g.l({Z:"div",A:"ytp-autonav-overlay"});g.K(this,this.overlay);this.overlay.E4(this.container.element);this.V=new g.l({Z:"div",A:"ytp-autonav-endscreen-button-container"});g.K(this,this.V);this.V.E4(this.container.element);
this.cancelButton=new g.l({Z:"button",O4:["ytp-autonav-endscreen-upnext-button","ytp-autonav-endscreen-upnext-cancel-button","ytp-autonav-endscreen-upnext-button-rounded"],N:{"aria-label":"Cancel auto-play"},zJ:"Cancel"});g.K(this,this.cancelButton);this.cancelButton.E4(this.V.element);this.cancelButton.listen("click",this.Wy,this);this.O.createClientVe(this.cancelButton.element,this,115129);this.playButton=new g.l({Z:"a",O4:["ytp-autonav-endscreen-upnext-button","ytp-autonav-endscreen-upnext-play-button",
"ytp-autonav-endscreen-upnext-button-rounded"],N:{href:"{{url}}",role:"button","aria-label":"Play next video"},zJ:"Play now"});g.K(this,this.playButton);this.playButton.E4(this.V.element);this.playButton.listen("click",this.x$,this);this.O.createServerVe(this.playButton.element,this.playButton,!0);(U=this.O.getVideoData())&&cz2(this,U);this.D=new g.iX(()=>{rL(this)},500);
g.K(this,this.D);this.SE();this.K(k,"autonavvisibility",this.SE);this.O.C("web_autonav_color_transition")&&(this.K(k,"autonavchange",this.By),this.K(k,"onAutonavCoundownStarted",this.eE))}X(k){this.suggestion!==k&&(this.suggestion=k,g.Ry(this.J,k),this.playButton.updateValue("url",this.suggestion.E0()),Lx(this))}S(){return this.L>0}W(){this.S()||(this.L=Date.now(),rL(this),yzp(this.O,Z6(this)),g.N(this.O.getRootNode(),"countdown-running",this.S()))}j(){this.B();rL(this);const k=this.J.jE("ytp-autonav-endscreen-upnext-header");
k&&g.d8(k,"Up next")}B(){this.S()&&(this.D.stop(),this.L=0)}select(k=!1){this.O.nextVideo(!1,k);this.B()}x$(k){g.WG(k,this.O)&&(k.currentTarget===this.playButton.element?this.O.logClick(this.playButton.element):k.currentTarget===this.J.jE("ytp-autonav-endscreen-link-container")&&(k=this.J.jE("ytp-autonav-endscreen-link-container"),this.O.logVisibility(k,!0),this.O.logClick(k)),this.Y?(g.LB(this.O,"innertubeCommand",this.Y),this.B()):this.select())}Wy(){this.O.logClick(this.cancelButton.element);g.bM(this.O,
!0);this.cancelCommand&&g.LB(this.O,"innertubeCommand",this.cancelCommand)}onVideoDataChange(k,U){cz2(this,U);this.cancelCommand=U.getWatchNextResponse()?.playerOverlays?.playerOverlayRenderer?.autoplay?.playerOverlayAutoplayRenderer?.cancelButton?.buttonRenderer?.command}eE(k){if(this.O.getVideoData()?.watchToWatchTransitionRenderer){var U=this.O.getVideoData().watchToWatchTransitionRenderer;const n=U?.fromColorPaletteDark,Z=U?.toColorPaletteDark;n&&Z&&(U=this.element,U.style.setProperty("--w2w-start-background-color",
g.x1(n.surgeColor)),U.style.setProperty("--w2w-start-primary-text-color",g.x1(n.primaryTitleColor)),U.style.setProperty("--w2w-start-secondary-text-color",g.x1(n.secondaryTitleColor)),U.style.setProperty("--w2w-end-background-color",g.x1(Z.surgeColor)),U.style.setProperty("--w2w-end-primary-text-color",g.x1(Z.primaryTitleColor)),U.style.setProperty("--w2w-end-secondary-text-color",g.x1(Z.secondaryTitleColor)),U.style.setProperty("--w2w-animation-duration",`${k}ms`));g.N(this.element,"ytp-w2w-animate",
!0)}}By(k){this.O.C("web_autonav_color_transition")&&k!==2&&g.N(this.element,"ytp-w2w-animate",!1)}SE(){const k=this.O.m7();this.IQ&&this.Bc!==k&&this.Uj(k);Lx(this);this.O.logVisibility(this.container.element,k);this.O.logVisibility(this.cancelButton.element,k);this.O.logVisibility(this.J.jE("ytp-autonav-endscreen-link-container"),k);this.O.logVisibility(this.playButton.element,k)}y0(k){return k.width<400||k.height<459}};var Et=class extends g.l{constructor(k,U){super({Z:"div",O4:["html5-endscreen","ytp-player-content",U||"base-endscreen"]});this.created=!1;this.player=k}create(){this.created=!0}destroy(){this.created=!1}J(){return!1}m7(){return!1}Y(){return!1}};var A4=class extends g.l{constructor(k){super({Z:"div",O4:["ytp-upnext","ytp-player-content"],N:{"aria-label":"{{aria_label}}"},G:[{Z:"div",A:"ytp-cued-thumbnail-overlay-image",N:{style:"{{background}}"}},{Z:"span",A:"ytp-upnext-top",G:[{Z:"span",A:"ytp-upnext-header",zJ:"Up Next"},{Z:"span",A:"ytp-upnext-title",zJ:"{{title}}"},{Z:"span",A:"ytp-upnext-author",zJ:"{{author}}"}]},{Z:"a",A:"ytp-upnext-autoplay-icon",N:{role:"button",href:"{{url}}","aria-label":"Play next video"},G:[{Z:"svg",N:{height:"100%",
version:"1.1",viewBox:"0 0 72 72",width:"100%"},G:[{Z:"circle",A:"ytp-svg-autoplay-circle",N:{cx:"36",cy:"36",fill:"#fff","fill-opacity":"0.3",r:"31.5"}},{Z:"circle",A:"ytp-svg-autoplay-ring",N:{cx:"-36",cy:"36","fill-opacity":"0",r:"33.5",stroke:"#FFFFFF","stroke-dasharray":"211","stroke-dashoffset":"-211","stroke-width":"4",transform:"rotate(-90)"}},{Z:"path",A:"ytp-svg-fill",N:{d:"M 24,48 41,36 24,24 V 48 z M 44,24 v 24 h 4 V 24 h -4 z"}}]}]},{Z:"span",A:"ytp-upnext-bottom",G:[{Z:"span",A:"ytp-upnext-cancel"},
{Z:"span",A:"ytp-upnext-paused",zJ:"Auto-play is paused"}]}]});this.api=k;this.cancelButton=null;this.Wy=this.jE("ytp-svg-autoplay-ring");this.D=this.notification=this.J=this.suggestion=null;this.Y=new g.iX(this.V,5E3,this);this.L=0;var U=this.jE("ytp-upnext-cancel");this.cancelButton=new g.l({Z:"button",O4:["ytp-upnext-cancel-button","ytp-button"],N:{tabindex:"0","aria-label":"Cancel auto-play"},zJ:"Cancel"});g.K(this,this.cancelButton);this.cancelButton.listen("click",this.x$,this);this.cancelButton.E4(U);
this.cancelButton&&this.api.createClientVe(this.cancelButton.element,this,115129);g.K(this,this.Y);this.api.createClientVe(this.element,this,18788);U=this.jE("ytp-upnext-autoplay-icon");this.K(U,"click",this.By);this.api.createClientVe(U,this,115130);this.SE();this.K(k,"autonavvisibility",this.SE);this.K(k,"mdxnowautoplaying",this.eE);this.K(k,"mdxautoplaycanceled",this.IQ);g.N(this.element,"ytp-upnext-mobile",this.api.U().B)}V(){this.notification&&(this.Y.stop(),this.V4(this.D),this.D=null,this.notification.close(),
this.notification=null)}X(k){this.suggestion=k;g.Ry(this,k,"hqdefault.jpg")}SE(){this.Uj(this.api.m7());this.api.logVisibility(this.element,this.api.m7());this.api.logVisibility(this.jE("ytp-upnext-autoplay-icon"),this.api.m7());this.cancelButton&&this.api.logVisibility(this.cancelButton.element,this.api.m7())}V$(){window.focus();this.V()}W(k){this.S()||(g.FR("a11y-announce",`${"Up Next"} ${this.suggestion.title}`),this.L=(0,g.D)(),this.J=new g.iX(()=>{Fq(this,k)},25),Fq(this,k),yzp(this.api,lrB(this,
k)));
g.Oe(this.element,"ytp-upnext-autoplay-paused")}hide(){super.hide()}S(){return!!this.J}j(){this.B();this.L=(0,g.D)();Fq(this);g.F_(this.element,"ytp-upnext-autoplay-paused")}B(){this.S()&&(this.J.dispose(),this.J=null)}select(k=!1){if(this.api.U().C("autonav_notifications")&&k&&window.Notification&&typeof document.hasFocus==="function"){const U=Notification.permission;U==="default"?Notification.requestPermission():U!=="granted"||document.hasFocus()||(this.V(),this.notification=new Notification("Up Next",
{body:this.suggestion.title,icon:this.suggestion.JT()}),this.D=this.K(this.notification,"click",this.V$),this.Y.start())}this.B();this.api.nextVideo(!1,k)}By(k){!g.A5(this.cancelButton.element,k.target)&&g.WG(k,this.api)&&(this.api.m7()&&this.api.logClick(this.jE("ytp-upnext-autoplay-icon")),this.select())}x$(){this.api.m7()&&this.cancelButton&&this.api.logClick(this.cancelButton.element);g.bM(this.api,!0)}eE(k){this.api.getPresentingPlayerType();this.show();this.W(k)}IQ(){this.api.getPresentingPlayerType();
this.B();this.hide()}Q$(){this.B();this.V();super.Q$()}};var nH2=class extends Et{constructor(k){super(k,"autonav-endscreen");this.overlay=this.videoData=null;this.table=new g.l({Z:"div",A:"ytp-suggestion-panel",G:[{Z:"div",O4:["ytp-autonav-endscreen-upnext-header","ytp-autonav-endscreen-more-videos"],zJ:"More videos"}]});this.D=new g.l({Z:"div",A:"ytp-suggestions-container"});this.videos=[];this.j=null;this.L=this.X=!1;this.B=new Xq(this.player);g.K(this,this.B);this.B.E4(this.element);k.getVideoData().h8?this.S=this.B:(this.S=new A4(k),g.$Z(this.player,
this.S.element,4),g.K(this,this.S));this.overlay=new g.l({Z:"div",A:"ytp-autonav-overlay-cancelled-state"});g.K(this,this.overlay);this.overlay.E4(this.element);this.W=new g.HW(this);g.K(this,this.W);g.K(this,this.table);this.table.E4(this.element);this.table.show();g.K(this,this.D);this.D.E4(this.table.element);this.hide()}create(){super.create();this.W.K(this.player,"appresize",this.V);this.W.K(this.player,"onVideoAreaChange",this.V);this.W.K(this.player,"videodatachange",this.onVideoDataChange);
this.W.K(this.player,"autonavchange",this.SE);this.W.K(this.player,"onAutonavCancelled",this.x$);this.onVideoDataChange()}show(){super.show();(this.X||this.j&&this.j!==this.videoData.clientPlaybackNonce)&&g.bM(this.player,!1);g.pB(this.player)&&this.J()&&!this.j?(vD(this),this.videoData.autonavState===2?this.player.getVisibilityState()===3||nx(this.player.qT())&&this.player.C("web_player_pip_logging_fix")?this.S.select(!0):this.S.W():this.videoData.autonavState===3&&this.S.j()):(g.bM(this.player,
!0),vD(this));this.V()}hide(){super.hide();this.S.j();vD(this)}V(){var k=this.player.YG(!0,this.player.isFullscreen());vD(this);Lx(this.B);g.N(this.element,"ytp-autonav-cancelled-small-mode",this.y0(k));g.N(this.element,"ytp-autonav-cancelled-tiny-mode",this.MU(k));g.N(this.element,"ytp-autonav-cancelled-mini-mode",k.width<=400||k.height<=360);this.overlay&&g.Pl(this.overlay.element,{width:`${k.width}px`});if(!this.L)for(k=0;k<this.videos.length;k++)g.N(this.videos[k].element,"ytp-suggestion-card-with-margin",
k%2===1)}onVideoDataChange(){var k=this.player.getVideoData();if(this.videoData!==k&&k){this.videoData=k;k=this.videoData.suggestions;var U=this.videoData.D();U&&(this.S.X(U),this.S!==this.B&&this.B.X(U));if(k&&k.length)for(let Z=0;Z<Uz2.length;++Z){var n=Uz2[Z];k&&k[n]&&(this.videos[Z]=new iHm(this.player),U=this.videos[Z],n=k[n],U.suggestion!==n&&(U.suggestion=n,g.Ry(U,n)),g.K(this,this.videos[Z]),this.videos[Z].E4(this.D.element))}this.V()}}SE(k){k===1?(this.X=!1,this.j=this.videoData.clientPlaybackNonce,
this.S.B(),this.Bc&&this.V()):(this.X=!0,this.m7()&&(k===2?this.S.W():k===3&&this.S.j()))}x$(k){k?this.SE(1):(this.j=null,this.X=!1)}J(){return this.videoData.autonavState!==1}y0(k){return(k.width<910||k.height<459)&&!this.MU(k)&&!(k.width<=400||k.height<=360)}MU(k){return k.width<800&&!(k.width<=400||k.height<=360)}m7(){return this.Bc&&g.pB(this.player)&&this.J()&&!this.j}},Uz2=[1,3,2,4];var ZHp=class extends Et{constructor(k){super(k,"videowall-endscreen");this.O=k;this.stills=[];this.W=this.videoData=null;this.V=this.D=!1;this.SE=null;g.F_(this.element,"modern-videowall-endscreen");this.B=new g.HW(this);g.K(this,this.B);this.L=new g.iX(()=>{g.F_(this.element,"ytp-show-tiles")},0);
g.K(this,this.L);this.table=new g.Bf({Z:"div",A:"ytp-modern-endscreen-content"});g.K(this,this.table);this.table.E4(this.element);k.getVideoData().h8?this.S=new Xq(k,!0):this.S=new A4(k);g.K(this,this.S);g.$Z(this.player,this.S.element,4);k.createClientVe(this.element,this,158789);this.hide()}create(){super.create();var k=this.player.getVideoData();k&&(this.videoData=k);this.j();this.B.K(this.player,"appresize",this.j);this.B.K(this.player,"onVideoAreaChange",this.j);this.B.K(this.player,"videodatachange",
this.onVideoDataChange);this.B.K(this.player,"autonavchange",this.X);this.B.K(this.player,"onAutonavCancelled",this.x$);k=this.videoData.autonavState;k!==this.SE&&this.X(k);this.B.K(this.element,"transitionend",this.By)}destroy(){this.B.B();g.yN(this.stills);this.stills=[];super.destroy();g.Oe(this.element,"ytp-show-tiles");this.L.stop();this.SE=this.videoData.autonavState}J(){return this.videoData.autonavState!==1}show(){const k=this.Bc;super.show();g.Oe(this.element,"ytp-show-tiles");this.player.U().B?
g.Ue(this.L):this.L.start();(this.V||this.W&&this.W!==this.videoData.clientPlaybackNonce)&&g.bM(this.player,!1);Ot(this)?(wL(this),this.videoData.autonavState===2?this.player.getVisibilityState()===3||nx(this.player.qT())&&this.player.C("web_player_pip_logging_fix")?this.S.select(!0):this.S.W():this.videoData.autonavState===3&&this.S.j()):(g.bM(this.player,!0),wL(this));k!==this.Bc&&this.player.logVisibility(this.element,!0)}hide(){const k=this.Bc;super.hide();this.S.j();wL(this);k!==this.Bc&&this.player.logVisibility(this.element,
!1)}By(k){k.target===this.element&&this.j()}j(){const k=this.videoData?.suggestions?.length?this.videoData?.suggestions:[this.videoData?.D()];if(k.length){var U=this.O.YG(!0,this.O.isFullscreen()),n=Math.floor((U.width-64+16)/(g.I0(U.width*.27,250,450)+16));U=Math.min(3,Math.floor((U.height-64)/((U.width-64-(n-1)*16)/n*.5625+70)));g.wp(this.element,["ytp-modern-endscreen-limit-rows-1","ytp-modern-endscreen-limit-rows-2","ytp-modern-endscreen-limit-rows-3"]);g.F_(this.element,`ytp-modern-endscreen-limit-rows-${U}`);
g.N(this.element,"ytp-modern-endscreen-single-item",n===1);g.N(this.element,"ytp-modern-endscreen-row-0",U===0);n=this.table.element;n.ariaLive="polite";this.S.X(this.videoData.D());this.S instanceof Xq&&Lx(this.S);g.N(this.element,"ytp-endscreen-takeover",Ot(this));wL(this);U=0;n.ariaBusy="true";var Z=k.length;for(let C=0;C<Z;C++){const r=C%Z;let L=this.stills[C];L||(L=new g.hsE(this.player),this.stills[C]=L,n.appendChild(L.element));g.wkz(L,k[r]);U++}this.stills.length=U}}onVideoDataChange(){const k=
this.player.getVideoData({playerType:1});this.videoData!==k&&(k?.D()?(this.videoData=k,this.j()):this.player.rM("missg",{vid:k?.videoId||"",cpn:k?.clientPlaybackNonce||""}))}Y(){return this.S.S()}X(k){k===1?(this.V=!1,this.W=this.videoData.clientPlaybackNonce,this.S.B(),this.Bc&&this.j()):(this.V=!0,this.Bc&&Ot(this)&&(k===2?this.S.W():k===3&&this.S.j()))}x$(k){if(k){for(k=0;k<this.stills.length;k++)this.O.logVisibility(this.stills[k].element,!0);this.X(1)}else this.W=null,this.V=!1;this.j()}m7(){return this.Bc&&
Ot(this)}};var CRm=class extends Et{constructor(k){super(k,"subscribecard-endscreen");this.S=new g.l({Z:"div",A:"ytp-subscribe-card",G:[{Z:"img",A:"ytp-author-image",N:{src:"{{profilePicture}}"}},{Z:"div",A:"ytp-subscribe-card-right",G:[{Z:"div",A:"ytp-author-name",zJ:"{{author}}"},{Z:"div",A:"html5-subscribe-button-container"}]}]});g.K(this,this.S);this.S.E4(this.element);const U=k.getVideoData();this.subscribeButton=new g.X7("Subscribe",null,"Unsubscribe",null,!0,!1,U.Hx,U.subscribed,"trailer-endscreen",null,
k,!1);g.K(this,this.subscribeButton);this.subscribeButton.E4(this.S.jE("html5-subscribe-button-container"));this.K(k,"videodatachange",this.U4);this.U4();this.hide()}U4(){const k=this.player.getVideoData();this.S.update({profilePicture:k.profilePicture,author:k.author});this.subscribeButton.channelId=k.Hx;var U=this.subscribeButton;k.subscribed?U.S():U.B()}};var rXV=class extends g.l{constructor(k){const U=k.U(),n=g.X3||g.TF?{style:"will-change: opacity"}:void 0,Z=U.J,C=["ytp-videowall-still"];U.B&&C.push("ytp-videowall-show-text");super({Z:"a",O4:C,N:{href:"{{url}}",target:Z?U.D:"","aria-label":"{{aria_label}}","data-is-live":"{{is_live}}","data-is-list":"{{is_list}}","data-is-mix":"{{is_mix}}"},G:[{Z:"div",A:"ytp-videowall-still-image",N:{style:"{{background}}"}},{Z:"span",A:"ytp-videowall-still-info",N:{"aria-hidden":"true"},G:[{Z:"span",A:"ytp-videowall-still-info-bg",
G:[{Z:"span",A:"ytp-videowall-still-info-content",N:n,G:[{Z:"span",A:"ytp-videowall-still-info-title",zJ:"{{title}}"},{Z:"span",A:"ytp-videowall-still-info-author",zJ:"{{author_and_views}}"},{Z:"span",A:"ytp-videowall-still-info-live",zJ:"Live"},{Z:"span",A:"ytp-videowall-still-info-duration",zJ:"{{duration}}"}]}]}]},{Z:"span",O4:["ytp-videowall-still-listlabel-regular","ytp-videowall-still-listlabel"],N:{"aria-hidden":"true"},G:[{Z:"span",A:"ytp-videowall-still-listlabel-icon"},"Playlist",{Z:"span",
A:"ytp-videowall-still-listlabel-length",G:[" (",{Z:"span",zJ:"{{playlist_length}}"},")"]}]},{Z:"span",O4:["ytp-videowall-still-listlabel-mix","ytp-videowall-still-listlabel"],N:{"aria-hidden":"true"},G:[{Z:"span",A:"ytp-videowall-still-listlabel-mix-icon"},"Mix",{Z:"span",A:"ytp-videowall-still-listlabel-length",zJ:" (50+)"}]}]});this.suggestion=null;this.B=Z;this.api=k;this.S=new g.HW(this);g.K(this,this.S);this.listen("click",this.onClick);this.listen("keypress",this.onKeyPress);this.S.K(k,"videodatachange",
this.onVideoDataChange);k.createServerVe(this.element,this);this.onVideoDataChange()}select(){this.api.OQ(this.suggestion.videoId,this.suggestion.sessionData,this.suggestion.playlistId,void 0,void 0,this.suggestion.Tv||void 0)&&this.api.logClick(this.element)}onClick(k){if(g.xP(this.api.U())&&this.api.C("web_player_log_click_before_generating_ve_conversion_params")){this.api.logClick(this.element);let U=this.suggestion.E0();const n={};g.TO(this.api,n);U=g.wV(U,n);g.jh(U,this.api,k)}else g.WG(k,this.api,
this.B,this.suggestion.sessionData||void 0)&&this.select()}onKeyPress(k){switch(k.keyCode){case 13:case 32:k.defaultPrevented||(this.select(),k.preventDefault())}}onVideoDataChange(){const k=this.api.getVideoData(),U=this.api.U();this.B=k.wm?!1:U.J}};var LUb=class extends Et{constructor(k){super(k,"videowall-endscreen");this.O=k;this.W=0;this.stills=[];this.V=this.videoData=null;this.L=this.SE=!1;this.x$=null;this.j=new g.HW(this);g.K(this,this.j);this.X=new g.iX(()=>{g.F_(this.element,"ytp-show-tiles")},0);
g.K(this,this.X);var U=new g.l({Z:"button",O4:["ytp-button","ytp-endscreen-previous"],N:{"aria-label":"Previous"},G:[g.VF()]});g.K(this,U);U.E4(this.element);U.listen("click",this.eE,this);this.table=new g.Bf({Z:"div",A:"ytp-endscreen-content"});g.K(this,this.table);this.table.E4(this.element);U=new g.l({Z:"button",O4:["ytp-button","ytp-endscreen-next"],N:{"aria-label":"Next"},G:[g.HC()]});g.K(this,U);U.E4(this.element);U.listen("click",this.Wy,this);k.getVideoData().h8?this.S=new Xq(k,!0):this.S=
new A4(k);g.K(this,this.S);g.$Z(this.player,this.S.element,4);k.createClientVe(this.element,this,158789);this.hide()}create(){super.create();var k=this.player.getVideoData();k&&(this.videoData=k);this.B();this.j.K(this.player,"appresize",this.B);this.j.K(this.player,"onVideoAreaChange",this.B);this.j.K(this.player,"videodatachange",this.onVideoDataChange);this.j.K(this.player,"autonavchange",this.D);this.j.K(this.player,"onAutonavCancelled",this.By);k=this.videoData.autonavState;k!==this.x$&&this.D(k);
this.j.K(this.element,"transitionend",this.IQ)}destroy(){this.j.B();g.yN(this.stills);this.stills=[];super.destroy();g.Oe(this.element,"ytp-show-tiles");this.X.stop();this.x$=this.videoData.autonavState}J(){return this.videoData.autonavState!==1}show(){const k=this.Bc;super.show();g.Oe(this.element,"ytp-show-tiles");this.player.U().B?g.Ue(this.X):this.X.start();(this.L||this.V&&this.V!==this.videoData.clientPlaybackNonce)&&g.bM(this.player,!1);ux(this)?(gL(this),this.videoData.autonavState===2?this.player.getVisibilityState()===
3||nx(this.player.qT())&&this.player.C("web_player_pip_logging_fix")?this.S.select(!0):this.S.W():this.videoData.autonavState===3&&this.S.j()):(g.bM(this.player,!0),gL(this));k!==this.Bc&&this.player.logVisibility(this.element,!0)}hide(){const k=this.Bc;super.hide();this.S.j();gL(this);k!==this.Bc&&this.player.logVisibility(this.element,!1)}IQ(k){k.target===this.element&&this.B()}B(){var k=this.videoData?.suggestions?.length?this.videoData?.suggestions:[this.videoData?.D()];if(k.length){g.F_(this.element,
"ytp-endscreen-paginate");var U=this.O.YG(!0,this.O.isFullscreen()),n=g.Ec(this.O);n&&(n=n.dD()?48:32,U.width-=n*2);var Z=U.width/U.height,C=96/54,r=n=2,L=Math.max(U.width/96,2),F=Math.max(U.height/54,2),v=k.length;var O=v*4;for(O-=4;O>0&&(n<L||r<F);){var w=n/2,u=r/2,X=n<=L-2&&O>=u*4,E=r<=F-2&&O>=w*4;if((w+1)/u*C/Z>Z/(w/(u+1)*C)&&E)O-=w*4,r+=2;else if(X)O-=u*4,n+=2;else if(E)O-=w*4,r+=2;else break}C=!1;O>=12&&v*4-O<=6&&(r>=4||n>=4)&&(C=!0);O=n*96;L=r*54;Z=O/L<Z?U.height/L:U.width/O;Z=Math.min(Z,2);
O=Math.floor(Math.min(U.width,O*Z));L=Math.floor(Math.min(U.height,L*Z));U=this.table.element;U.ariaLive="polite";g.m5(U,O,L);g.Pl(U,{marginLeft:`${O/-2}px`,marginTop:`${L/-2}px`});this.S.X(this.videoData.D());this.S instanceof Xq&&Lx(this.S);g.N(this.element,"ytp-endscreen-takeover",ux(this));gL(this);O+=4;L+=4;Z=0;U.ariaBusy="true";for(F=0;F<n;F++)for(w=0;w<r;w++)if(X=Z,E=0,C&&F>=n-2&&w>=r-2?E=1:w%2===0&&F%2===0&&(w<2&&F<2?w===0&&F===0&&(E=2):E=2),X=g.qU(X+this.W,v),E!==0){u=this.stills[Z];u||(u=
new rXV(this.player),this.stills[Z]=u,U.appendChild(u.element));var V=Math.floor(L*w/r);const Q=Math.floor(O*F/n),p=Math.floor(L*(w+E)/r)-V-4,I=Math.floor(O*(F+E)/n)-Q-4;g.S6(u.element,Q,V);g.m5(u.element,I,p);g.Pl(u.element,"transitionDelay",(w+F)/20+"s");g.N(u.element,"ytp-videowall-still-mini",E===1);g.N(u.element,"ytp-videowall-still-large",E>2);E=Math.max(I,p);g.N(u.element,"ytp-videowall-still-round-large",E>=256);g.N(u.element,"ytp-videowall-still-round-medium",E>96&&E<256);g.N(u.element,"ytp-videowall-still-round-small",
E<=96);X=k[X];u.suggestion!==X&&(u.suggestion=X,E=u.api.U(),V=g.L2(u.element,"ytp-videowall-still-large")?"hqdefault.jpg":"mqdefault.jpg",g.Ry(u,X,V),g.xP(E)&&!u.api.C("web_player_log_click_before_generating_ve_conversion_params")&&(E=X.E0(),V={},g.Oc(u.api,"addEmbedsConversionTrackingParams",[V]),E=g.wV(E,V),u.updateValue("url",E)),(X=(X=X.sessionData)&&X.itct)&&u.api.setTrackingParams(u.element,X));Z++}U.ariaBusy="false";g.N(this.element,"ytp-endscreen-paginate",Z<v);for(k=this.stills.length-1;k>=
Z;k--)n=this.stills[k],g.Ex(n.element),g.MD(n);this.stills.length=Z}}onVideoDataChange(){const k=this.player.getVideoData({playerType:1});this.videoData!==k&&(k?.D()?(this.W=0,this.videoData=k,this.B()):this.player.rM("missg",{vid:k?.videoId||"",cpn:k?.clientPlaybackNonce||""}))}Wy(){this.W+=this.stills.length;this.B()}eE(){this.W-=this.stills.length;this.B()}Y(){return this.S.S()}D(k){k===1?(this.L=!1,this.V=this.videoData.clientPlaybackNonce,this.S.B(),this.Bc&&this.B()):(this.L=!0,this.Bc&&ux(this)&&
(k===2?this.S.W():k===3&&this.S.j()))}By(k){if(k){for(k=0;k<this.stills.length;k++)this.O.logVisibility(this.stills[k].element,!0);this.D(1)}else this.V=null,this.L=!1;this.B()}m7(){return this.Bc&&ux(this)}};var FU_=class extends g.l{constructor(k){super({Z:"button",O4:["ytp-watch-on-youtube-button","ytp-button"],zJ:"{{content}}"});this.O=k;this.buttonType=this.buttonType=1;this.S();this.buttonType===2&&g.F_(this.element,"ytp-continue-watching-button");this.listen("click",this.onClick);this.listen("videodatachange",this.S);this.Uj(!0)}S(){let k,U;switch(this.buttonType){case 1:k="Watch again on YouTube";U=156915;break;case 2:k="Continue watching on YouTube";U=156942;break;default:k="Continue watching on YouTube",
U=156942}this.update({content:k});this.O.hasVe(this.element)&&this.O.destroyVe(this.element);this.O.createClientVe(this.element,this,U)}onClick(k){this.O.C("web_player_log_click_before_generating_ve_conversion_params")&&this.O.logClick(this.element);g.jh(this.getVideoUrl(),this.O,k);this.O.C("web_player_log_click_before_generating_ve_conversion_params")||this.O.logClick(this.element)}getVideoUrl(){var k=!0;switch(this.buttonType){case 1:k=!0;break;case 2:k=!1}k=this.O.getVideoUrl(k,!1,!1,!0);const U=
this.O.U();if(g.xP(U)){const n={};g.xP(U)&&g.Oc(this.O,"addEmbedsConversionTrackingParams",[n]);k=g.wV(k,n)}return k}logVisibility(){this.O.logVisibility(this.element,this.Bc&&this.dM)}show(){super.show();this.logVisibility()}hide(){super.hide();this.logVisibility()}kF(k){super.kF(k);this.logVisibility()}};var vHp=class extends Et{constructor(k){super(k,"watch-again-on-youtube-endscreen");this.watchButton=new FU_(k);g.K(this,this.watchButton);this.watchButton.E4(this.element);g.c7a(k)&&(this.S=new g.Usi(k),g.K(this,this.S),this.B=new g.l({Z:"div",O4:["ytp-watch-again-on-youtube-endscreen-more-videos-container"],N:{tabIndex:"-1"},G:[this.S]}),g.K(this,this.B),this.S.E4(this.B.element),this.B.E4(this.element));k.createClientVe(this.element,this,156914);this.hide()}hasSuggestions(){return this.S?.hasSuggestions()}show(){if(this.player.getPlayerState()!==
3){super.show();const U=this.B;if(U){var k=this.S.hasSuggestions();g.N(this.element,"ytp-shorts-branded-ui",k);k?U.show():U.hide()}g.Ec(this.player)?.ZX(!0);this.player.logVisibility(this.element,!0);this.watchButton.kF(!0)}}hide(){super.hide();g.Ec(this.player)?.ZX(!1);this.player.logVisibility(this.element,!1);this.watchButton.kF(!1)}};g.Jq("endscreen",class extends g.eX{constructor(k){super(k);this.endScreen=null;this.S=this.B=this.j=!1;this.listeners=new g.HW(this);g.K(this,this.listeners);const U=k.U();k.isEmbedsShortsMode()?this.endScreen=new vHp(k):mTV(k)?(this.j=!0,xTb(this),this.S?this.endScreen=new nH2(k):U.C("delhi_modern_endscreen")?this.endScreen=new ZHp(k):this.endScreen=new LUb(k)):U.ef?this.endScreen=new CRm(k):this.endScreen=new Et(k);g.K(this,this.endScreen);g.$Z(k,this.endScreen.element,4);kob(this);this.listeners.K(k,
"videodatachange",this.onVideoDataChange,this);this.listeners.K(k,g.aQ("endscreen"),n=>{this.onCueRangeEnter(n)});
this.listeners.K(k,g.$g("endscreen"),n=>{this.onCueRangeExit(n)})}L4(){var k=this.player.getVideoData();
const U=k.mutedAutoplay&&(k.limitedPlaybackDurationInSeconds>0||k.endSeconds>0||k.mutedAutoplayDurationMode!==2);if(this.player.isEmbedsShortsMode()&&!U)return!0;var n=!(!k?.D()&&!k?.suggestions?.length);n=!mTV(this.player)||n;k=k.CP;const Z=this.player.EK();return n&&!k&&!Z&&!U}m7(){return this.endScreen.m7()}k9(){return this.m7()?this.endScreen.Y():!1}Q$(){this.player.Wn("endscreen");super.Q$()}load(){{const n=this.player.getVideoData(),Z=n.transitionEndpointAtEndOfStream;if(Z&&Z.videoId){var k=
this.player.Il().jf.get("heartbeat");var U=n.D();!U||Z.videoId!==U.videoId||n.eD?(this.player.OQ(Z.videoId,void 0,void 0,!0,!0,Z),k&&k.fV("HEARTBEAT_ACTION_TRIGGER_AT_STREAM_END","HEARTBEAT_ACTION_TRANSITION_REASON_HAS_NEW_STREAM_TRANSITION_ENDPOINT"),k=!0):k=!1}else k=!1}k||(super.load(),this.endScreen.show())}unload(){super.unload();this.endScreen.hide();this.endScreen.destroy()}onCueRangeEnter(k){this.L4()&&(this.endScreen.created||this.endScreen.create(),k.getId()==="load"&&this.load())}onCueRangeExit(k){k.getId()===
"load"&&this.loaded&&this.unload()}onVideoDataChange(){kob(this);this.j&&xTb(this)&&(this.endScreen&&(this.endScreen.hide(),this.endScreen.created&&this.endScreen.destroy(),this.endScreen.dispose()),this.S?this.endScreen=new nH2(this.player):this.endScreen=new LUb(this.player),g.K(this,this.endScreen),g.$Z(this.player,this.endScreen.element,4))}});})(_yt_player);
